# task3
Junior Системный аналитик 


## ЗАДАНИЕ 1  


1 + 2 + 9
Пункт 1: можно добавить 1–10 шт. Пункт 2: нельзя уменьшить ниже 1 Пункт 9: если уменьшить до 0 — товар удаляется
Прямое противоречие: пользователь физически не может уменьшить количество до 0, но п.9 описывает поведение при этом действии.

2 + 9
Удаление только отдельной кнопкой, но при этом «уменьшение до 0 удаляет»
Два разных способа удаления — это путаница для пользователя и разработчика.

3 + 4
Не более 5 различных товаров И не более 20 штук суммарно
Неясно, какое ограничение жёстче и что показывать пользователю при нарушении. Например, можно ли иметь 5 товаров по 4 шт. = 20 (да), а можно ли 5 товаров по 5 шт. = 25 (нет по сумме, но уже нельзя добавить 5-й товар, если у 4-х уже по 5).

6
Сообщение «Лимит корзины превышен»
Не указано, какой именно лимит превышен (по количеству товаров, по штукам одного товара, по общему количеству). Пользователь не поймёт, что именно нельзя сделать.

7 + 13
Пункт 7: цена фиксируется на момент добавления и не меняется Пункт 13: если цена изменилась в каталоге — автоматически обновить в корзине у всех
Прямое и очень серьёзное противоречие. Это два противоположных бизнес-правила.

11
«Реклама в корзине каждый будний день по утрам и вечерам»
Не сказано, что именно считается «утром» и «вечером» (по часовому поясу пользователя? по МСК?), как технически это реализовать, откуда брать рекламные товары, можно ли отключить и т.д. Пункт звучит как техническое решение, а не требование.

10 + 11
Реклама в корзине + жёсткое расписание
Реклама в корзине обычно показывается всегда при открытии страницы, а не только в определённые часы по будням. Это странное ограничение.

Отсутствует
Нет пункта про поведение при отсутствии товаров на складе
Что делать, если товар в корзине закончился на складе? Удалять? Блокировать оформление?

Отсутствует
Нет требования по сроку жизни корзины
Корзина гостевая или только для авторизованных? Сколько хранится?

Отсутствует
Нет описания поведения при изменении характеристик товара (например, другой вес огурцов)
Это считается тем же товаром или новым?

 
## 2) Исправленная версия ТЗ
1.	Пользователь может добавить в корзину от 1 до 10 единиц одного товара.
2.	В корзине одновременно может находиться не более 5 различных товаров и не более 20 единиц товара суммарно по всем позициям.
3.	При попытке добавить товар, который нарушает любое из ограничений п.2, система показывает точное сообщение об ошибке:
o   «В корзине уже 5 разных товаров — удалите что-то, чтобы добавить новый»
o   «В корзине уже 20 единиц товаров — уменьшите количество»
o   «Нельзя добавить больше 10 единиц одного товара»
4.	Пользователь может изменить количество товара в корзине:
o   Минимальное количество — 1 шт.
o   Максимальное — 10 шт. для одного товара (с учётом общего лимита 20 шт.)
o   Для удаления товара из корзины используется кнопка «Удалить» (крестик).
o   Уменьшение количества до 0 через «−» запрещено (кнопка неактивна при количестве = 1).
5.	Цена товара фиксируется на момент добавления в корзину и не меняется при дальнейшем изменении цены в каталоге.
6.	На странице корзины отображаются:
o   список товаров с картинкой, названием, характеристиками
o   количество (с возможностью изменения)
o   цена за единицу (та, что была на момент добавления)
o   стоимость позиции
o   общая сумма заказа
o   кнопка «Удалить» для каждой позиции
7.	Если товар стал недоступен для покупки (нет на складе, снят с продажи), он остаётся в корзине, но при попытке оформления заказа пользователь видит предупреждение и должен удалить такие позиции.
8.	В корзине может отображаться блок рекомендаций/перекрестных продаж (например, «С этим покупают», акции). Состав и время показа рекомендаций определяется маркетинговой командой отдельно.
9.	Корзина сохраняется:
o   для авторизованных пользователей — бессрочно
для гостей — 30 дней (или до закрытия браузера, если cookies очищаются)
 
3) Уточняющие вопросы, которые я бы задал продукт-менеджеру / заказчику
1.	Что важнее: ограничение по количеству разных товаров (5) или по общему количеству единиц (20)? Есть ли приоритет при конфликте?
2.	Цена в корзине должна быть зафиксирована (п.7) или автоматически обновляться (п.13)? Это критически важный бизнес-вопрос — нужно выбрать один вариант.
3.	Нужно ли сохранять корзину для неавторизованных пользователей? Если да — на какой срок?
4.	Что делать, если товар в корзине закончился на складе или был снят с продажи?
5.	Реклама/рекомендации в корзине:
o   Это обязательный блок или можно отключить?
o   Должны ли рекомендации показываться только по будням утром и вечером, или это была ошибка в формулировке?
o   Кто и как будет задавать содержимое этих блоков?
6.	Есть ли разные лимиты корзины для разных каналов (мобильное приложение, сайт, планшет)?
7.	Нужно ли показывать пользователю, что цена была изменена в каталоге, но в корзине осталась старая (например, «Цена снижена! Было 199 ₽ → 149 ₽»)?
8.	Должна ли корзина очищаться при выходе из аккаунта или при смене города/склада?
9.	Есть ли товары, на которые лимиты корзины не распространяются (например, акционные наборы)?

## ЗАДАНИЕ 2
1) GET /v1/partners/stores

Header:
Authorization: Bearer <jwt_token>
X-App-Version: 2.34.1
X-Device-ID: 8F9E2A1C-...
X-City-ID: 77               // например, Москва
X-Coordinates: 55.7558,37.6173   

Query parameters:
?delivery_type=express      
?lat=55.7558&lon=37.6173    
2) {
  "success": true,
  "data": [
    {
      "id": "metro",
      "title": "METRO",
      "logo_url": "https://petrushka.app/partners/metro_logo.png",
      "background_color": "#002776",
      "text_color": "#FFFFFF",
      "delivery_info": "Ближайшая доставка сегодня 21:00-23:00",
      "delivery_type": "scheduled",
      "deep_link": "https://metro.ru/app?ref=petrushka",           // сюда перейдёт пользователь
      "web_url": "https://online.metro-cc.ru/?utm_source=petrushka"
    },
    {
      "id": "auchan",
      "title": "Ашан",
      "logo_url": "https://petrushka.app/partners/auchan_logo.png",
      "background_color": "#ED1C24",
      "text_color": "#FFFFFF",
      "delivery_info": "Ближайшая доставка сегодня 18:00-20:00",
      "delivery_type": "scheduled",
      "deep_link": "auchan://app?partner=petrushka",
      "web_url": "https://www.auchan.ru/?utm_campaign=petrushka"
    },
    {
      "id": "vkusvill",
      "title": "ВкусВилл",
      "logo_url": "https://petrushka.app/partners/vkusvill_logo.png",
      "background_color": "#FFFFFF",
      "text_color": "#000000",
      "delivery_info": "Быстрая доставка от 20 до 60 минут",
      "delivery_type": "express",
      "deep_link": "vkusvill://main?source=petrushka",
      "web_url": "https://vkusvill.ru/?ref=petrushka"
    },
    {
      "id": "victoria",
      "title": "ВИКТОРИЯ",
      "logo_url": "https://petrushka.app/partners/victoria_logo.png",
      "background_color": "#8CC63F",
      "text_color": "#FFFFFF",
      "delivery_info": "Ближайшая доставка сегодня 17:00-19:00",
      "delivery_type": "scheduled",
      "deep_link": "victoria://app?utm_source=petrushka",
      "web_url": "https://victoria.ru/?partner=petrushka"
    }
  ],
  "meta": {
    "total": 4,
    "updated_at": "2025-12-02T10:15:00+03:00"
  }
}
